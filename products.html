<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="dns-prefetch" href="//blazed.sirv.com/">
        <link rel="preconnect" href="https://blazed.sirv.com/">

        <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet"> 
        <link rel="stylesheet" href="lib/blz-fire/fire.css">
        <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">-->
        <link href="css/style.css" rel="stylesheet">

        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
        <link href="lib/slick/slick.css" rel="stylesheet">
        <link href="lib/slick/slick-theme.css" rel="stylesheet">
        <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

        <script src="lib/blz-fire/fire.js"></script>
        <script src="js/site.blz.js"></script>

        <script src="js/views/products.blz.js"></script>
        <script type="module">
          // Import the functions you need from the SDKs you need
          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js";
          import { getFirestore, collection, getDocs, query, startAfter, limit, orderBy, where } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-firestore.js";
          // TODO: Add SDKs for Firebase products that you want to use
          // https://firebase.google.com/docs/web/setup#available-libraries
    
          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    
          // Initialize Firebase
          const app = initializeApp(firebaseConfig);
          const db = getFirestore(app);

          async function getProducts(db){
            const productsCol = collection(db, 'products');
    
            /*Get Total Count
            const qry = query(productsCol);
            const snapshot = await getDocs(qry);
            const count = snapshot.size;
            */

            let currentPage = 1;
            let q = null;
            let lastItem = [];
            const pageNum = document.getElementById('page-num');
            q = query(productsCol, orderBy('name', 'asc'), limit(12));
            const snapshot = await getDocs(q);
            const productsList = snapshot.docs.map(doc => doc.data());
            for(let i = 0; i < productsList.length; i++){
              document.getElementById('products-inner').style = "height: 100%;";
              document.getElementById('products-inner').innerHTML += `
                  <div class="col-lg-3 col-md-6 col-sm-6 portfolio-item web-des">
                        <div class="portfolio-wrap">
                            <figure>
                                <img src="${productsList[i].image}?w=300&h=300" alt="Portfolio Image">
                                <a href="https://blazedlabs.com/product.html?id=${productsList[i].slug}" class="link-preview" data-lightbox="portfolio"><i class="fa fa-eye"></i></a>
                                <a href="${productsList[i].url}" class="link-details"><i class="fa fa-link"></i></a>
                                <a class="portfolio-title" href="https://blazedlabs.com/product.html?id=${productsList[i].slug}">
                                  ${productsList[i].name} 
                                </a>
                            </figure>
                        </div>
                    </div>
              `;
            }
          }
          
          getProducts(db);
        </script>
        <!--[if lt IE 9]>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
        <![endif]-->
    </head>
    <body>
      <script>
        let page = getPage();
        const config = build_config(siteConfig, 
        'Blazed Labs LLC: We turn Dreams into Reality - Our Products.', 
        page);
        let pageData = build_routes(page);
        const blz_app = new Fire(config);
        create_app(blz_app.config, pageData);
      </script>
      <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
      <script src="lib/slick/slick.min.js"></script>
      <script src="lib/isotope/isotope.pkgd.min.js"></script>
      <script src="lib/lightbox/js/lightbox.min.js"></script>
      <script src="js/main.js"></script>
    </body>
</html>